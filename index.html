<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ACNH Switch 2 v3.0.0 Unlock Countdown (ET)</title>
  <style>
    :root {
      --sky1: #bfe9ff;
      --sky2: #fff3c9;
      --grass: #bff3c7;
      --ink: #1b1b1b;
      --card: rgba(255,255,255,0.82);
      --cardBorder: rgba(0,0,0,0.08);
    }

    body {
      margin: 0;
      min-height: 100vh;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color: var(--ink);

      /* Animal Crossing–inspired pastel sky → warm → grass */
      background:
        /* subtle “grid cloth” */
        repeating-linear-gradient(0deg, rgba(255,255,255,0.16) 0 1px, rgba(255,255,255,0) 1px 24px),
        repeating-linear-gradient(90deg, rgba(255,255,255,0.14) 0 1px, rgba(255,255,255,0) 1px 24px),
        /* leaf motif */
        url("data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20width=%2296%22%20height=%2296%22%20viewBox=%220%200%2096%2096%22%3E%0A%20%20%3Crect%20width=%2296%22%20height=%2296%22%20fill=%22none%22/%3E%0A%20%20%3Cg%20fill=%22%232f9e67%22%20opacity=%220.16%22%3E%0A%20%20%20%20%3Cpath%20d=%22M22%2058c12-2%2022-10%2029-23%202%2013-1%2026-10%2035-7%207-14%2010-19%2011%202-4%202-9%200-23z%22/%3E%0A%20%20%20%20%3Cpath%20d=%22M60%2030c10%203%2018%2011%2021%2024-12-1-22-7-28-17-3-5-4-9-5-12%204%202%208%203%2012%205z%22/%3E%0A%20%20%3C/g%3E%0A%20%20%3Cg%20stroke=%22%232f9e67%22%20stroke-width=%221.2%22%20opacity=%220.18%22%20fill=%22none%22%3E%0A%20%20%20%20%3Cpath%20d=%22M22%2058c9-2%2018-8%2026-18%22/%3E%0A%20%20%20%20%3Cpath%20d=%22M60%2030c8%203%2015%209%2019%2018%22/%3E%0A%20%20%3C/g%3E%0A%3C/svg%3E"),
        /* soft clouds */
        radial-gradient(circle at 20% 20%, rgba(255,255,255,0.55) 0 18%, rgba(255,255,255,0) 19%),
        radial-gradient(circle at 70% 28%, rgba(255,255,255,0.50) 0 16%, rgba(255,255,255,0) 17%),
        radial-gradient(circle at 35% 32%, rgba(255,255,255,0.45) 0 14%, rgba(255,255,255,0) 15%),
        /* base gradient */
        linear-gradient(to bottom, var(--sky1) 0%, var(--sky2) 55%, var(--grass) 100%);
      background-size:
        auto,
        auto,
        96px 96px,
        520px 520px,
        560px 560px,
        600px 600px,
        cover;
      background-repeat:
        repeat,
        repeat,
        repeat,
        no-repeat,
        no-repeat,
        no-repeat,
        no-repeat;
      background-position:
        0 0,
        0 0,
        0 0,
        0 0,
        0 0,
        0 0,
        0 0;
    }

    .wrap {
      max-width: 980px;
      margin: 0 auto;
      padding: 56px 18px 70px;
      text-align: center;
    }

    .card {
      margin: 0 auto;
      max-width: 840px;
      padding: 28px 22px 26px;
      background: var(--card);
      border: 1px solid var(--cardBorder);
      border-radius: 22px;
      box-shadow: 0 18px 40px rgba(0,0,0,0.10);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
    }

    h1 {
      font-size: 28px;
      margin: 0 0 16px;
      letter-spacing: 0.2px;
    }

    .line {
      font-size: 18px;
      margin: 10px 0;
    }

    .remaining {
      font-size: 24px;
      font-weight: 800;
      margin-top: 14px;
    }

    .pill {
      display: inline-block;
      padding: 7px 12px;
      border-radius: 999px;
      font-size: 13px;
      background: rgba(255,255,255,0.75);
      border: 1px solid rgba(0,0,0,0.10);
      margin-top: 12px;
    }

    .warn {
      color: #7a4b00;
      background: rgba(255, 243, 205, 0.85);
      border-color: rgba(255, 202, 40, 0.40);
    }

    .ok {
      color: #0b7a3a;
      background: rgba(232, 255, 240, 0.85);
      border-color: rgba(64, 192, 112, 0.30);
    }

    .small {
      font-size: 13px;
      color: rgba(0,0,0,0.60);
      margin-top: 18px;
      line-height: 1.35;
    }

    code {
      background: rgba(0,0,0,0.05);
      padding: 1px 5px;
      border-radius: 4px;
    }

    button {
      margin-top: 16px;
      padding: 10px 14px;
      border-radius: 12px;
      border: 1px solid rgba(0,0,0,0.12);
      background: rgba(255,255,255,0.85);
      cursor: pointer;
    }
    button:hover { background: rgba(255,255,255,0.95); }

    /* Smaller screens */
    @media (max-width: 520px) {
      h1 { font-size: 22px; }
      .line { font-size: 16px; }
      .remaining { font-size: 20px; }
      .card { border-radius: 18px; padding: 22px 16px; }
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="card">
      <h1>Animal Crossing: New Horizons — Nintendo Switch 2 Edition (v3.0.0)</h1>

      <div class="line" id="target">Target (ET): …</div>
      <div class="line" id="now">Now (ET): …</div>
      <div class="line remaining" id="remaining">Remaining: …</div>

      <div class="pill" id="sourcePill">Syncing time…</div>

      <button id="retryBtn" type="button" style="display:none">Retry time sync</button>

      <div class="small">
        Notes:
        <br/>• This is an <b>Animal Crossing–inspired</b> background (pastel sky + grass + leaf motif).
        <br/>• If you want an official wallpaper instead, you can download one from Nintendo’s My Nintendo Rewards and set it as a local background image.
        <br/>• You can keep this file local (<code>file:///…</code>) — no installs.
      </div>
    </div>
  </div>

<script>
  // ======= SETTINGS =======
  // Target unlock moment (Eastern Time). Jan 15, 2026 12:00 AM ET (EST = -05:00 in January).
  const TARGET_MS = Date.parse("2026-01-15T00:00:00-05:00");
  // ========================

  const elTarget = document.getElementById("target");
  const elNow = document.getElementById("now");
  const elRemaining = document.getElementById("remaining");
  const elSource = document.getElementById("sourcePill");
  const retryBtn = document.getElementById("retryBtn");

  function formatET(dateObj) {
    // 12-hour AM/PM in America/New_York
    return dateObj.toLocaleString("en-US", {
      timeZone: "America/New_York",
      month: "2-digit",
      day: "2-digit",
      year: "numeric",
      hour: "2-digit",
      minute: "2-digit",
      second: "2-digit",
      hour12: true
    }) + " ET";
  }

  function fmtRemaining(ms) {
    let total = Math.floor(ms / 1000);
    if (total < 0) total = 0;
    const days = Math.floor(total / 86400);
    total %= 86400;
    const hours = Math.floor(total / 3600);
    total %= 3600;
    const mins = Math.floor(total / 60);
    const secs = total % 60;
    const hh = String(hours).padStart(2, "0");
    const mm = String(mins).padStart(2, "0");
    const ss = String(secs).padStart(2, "0");
    return days > 0 ? `${days}d ${hh}:${mm}:${ss}` : `${hh}:${mm}:${ss}`;
  }

  async function fetchWithTimeout(url, {timeoutMs = 4500, responseType = "json"} = {}) {
    const controller = new AbortController();
    const t = setTimeout(() => controller.abort(), timeoutMs);
    try {
      const res = await fetch(url, { signal: controller.signal, cache: "no-store" });
      if (!res.ok) throw new Error(`${res.status} ${res.statusText}`);
      if (responseType === "text") return await res.text();
      return await res.json();
    } finally {
      clearTimeout(t);
    }
  }

  function parseCloudflareTraceTs(text) {
    const m = text.match(/(?:^|\n)ts=([0-9.]+)(?:\n|$)/);
    if (!m) throw new Error("No ts= in Cloudflare trace");
    return Math.floor(parseFloat(m[1]) * 1000);
  }

  async function getNetworkNowMs() {
    const worldTimeUrl = "https://worldtimeapi.org/api/timezone/Etc/UTC";
    const cloudflareTraceUrl = "https://cloudflare.com/cdn-cgi/trace";
    const allOriginsRaw = (u) => "https://api.allorigins.win/raw?url=" + encodeURIComponent(u);
    const corsProxyIO = (u) => "https://corsproxy.io/?" + encodeURIComponent(u);

    const sources = [
      {
        name: "WorldTimeAPI (direct)",
        run: async () => {
          const data = await fetchWithTimeout(worldTimeUrl, {responseType: "json"});
          const iso = data.utc_datetime || data.datetime;
          if (!iso) throw new Error("Missing utc_datetime");
          return Date.parse(iso);
        }
      },
      {
        name: "Cloudflare trace (direct)",
        run: async () => {
          const txt = await fetchWithTimeout(cloudflareTraceUrl, {responseType: "text"});
          return parseCloudflareTraceTs(txt);
        }
      },
      {
        name: "WorldTimeAPI (AllOrigins proxy)",
        run: async () => {
          const data = await fetchWithTimeout(allOriginsRaw(worldTimeUrl), {responseType: "json"});
          const iso = data.utc_datetime || data.datetime;
          if (!iso) throw new Error("Missing utc_datetime");
          return Date.parse(iso);
        }
      },
      {
        name: "Cloudflare trace (AllOrigins proxy)",
        run: async () => {
          const txt = await fetchWithTimeout(allOriginsRaw(cloudflareTraceUrl), {responseType: "text"});
          return parseCloudflareTraceTs(txt);
        }
      },
      {
        name: "WorldTimeAPI (corsproxy.io)",
        run: async () => {
          const data = await fetchWithTimeout(corsProxyIO(worldTimeUrl), {responseType: "json"});
          const iso = data.utc_datetime || data.datetime;
          if (!iso) throw new Error("Missing utc_datetime");
          return Date.parse(iso);
        }
      },
    ];

    let lastErr = null;
    for (const s of sources) {
      try {
        const ms = await s.run();
        if (!Number.isFinite(ms)) throw new Error("Invalid time");
        return { nowMs: ms, source: s.name };
      } catch (e) {
        lastErr = e;
      }
    }
    throw lastErr || new Error("All time sources failed");
  }

  const targetDate = new Date(TARGET_MS);
  elTarget.textContent = `Target (ET): ${formatET(targetDate)}`;

  let offsetMs = 0;
  let ticking = null;

  function setSourcePill(text, kind) {
    elSource.textContent = text;
    elSource.classList.remove("warn", "ok");
    if (kind) elSource.classList.add(kind);
  }

  function startTicking() {
    if (ticking) clearInterval(ticking);
    ticking = setInterval(() => {
      const nowMs = Date.now() + offsetMs;
      const remainingMs = TARGET_MS - nowMs;

      elNow.textContent = `Now (ET): ${formatET(new Date(nowMs))}`;
      elRemaining.textContent = `Remaining: ${fmtRemaining(remainingMs)}`;

      if (remainingMs <= 0) {
        clearInterval(ticking);
        document.title = "✅ UNLOCK TIME!";
        setSourcePill("✅ TARGET TIME REACHED", "ok");
        return;
      }
    }, 250);
  }

  async function syncTimeAndRun() {
    retryBtn.style.display = "none";
    setSourcePill("Syncing time…", null);

    try {
      const { nowMs, source } = await getNetworkNowMs();
      offsetMs = nowMs - Date.now();
      setSourcePill(`Time source: ${source}`, "ok");
      startTicking();
    } catch (e) {
      offsetMs = 0;
      setSourcePill("⚠ Using browser clock (time sync failed)", "warn");
      retryBtn.style.display = "inline-block";
      startTicking();
      console.warn("Time sync failed:", e);
    }
  }

  retryBtn.addEventListener("click", syncTimeAndRun);
  syncTimeAndRun();
</script>
</body>
</html>
